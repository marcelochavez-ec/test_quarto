[
  {
    "objectID": "IntroduccionMetodosMultivariantes.html",
    "href": "IntroduccionMetodosMultivariantes.html",
    "title": "Análisis Factorial - BiPlot",
    "section": "",
    "text": "# Carga de las bibliotecas:\nlibrary(tidymodels)\nlibrary(highcharter)\nlibrary(tidyverse)\nlibrary(skimr)\nlibrary(DataExplorer)\nlibrary(ggpubr)\nlibrary(univariateML)\nlibrary(GGally)\nlibrary(doParallel)\nlibrary(jsonlite)\nlibrary(openxlsx)\nlibrary(ggplot2)\nlibrary(RPostgreSQL)\nlibrary(e1071)\nlibrary(RColorBrewer)\nlibrary(DT)\nlibrary(psych)\nlibrary(devtools)\nlibrary(ggbiplot)\nsource(\"funciones.R\")\n\ndata(\"SaratogaHouses\", package = \"mosaicData\")\n\ndatos &lt;- SaratogaHouses\n\n# Se renombran las columnas para que sean más descriptivas\ncolnames(datos) &lt;- c(\"precio_alquiler\",\n                     \"metros_totales\", \n                     \"antiguedad\",\n                     \"precio_terreno\",\n                     \"metros_habitables\",\n                     \"universitarios\",\n                     \"dormitorios\",\n                     \"chimenea\",\n                     \"banios\",\n                     \"habitaciones\",\n                     \"tipo_calefaccion\", \n                     \"consumo_calefaccion\",\n                     \"desague\",\n                     \"parques_canchas_deportivas\",\n                     \"construccion_nueva\", \n                     \"linea_telefonica\")\n\n# Recodificación de valores al español:\n\ndatos &lt;- datos %&gt;% \n    mutate(tipo_calefaccion = case_when(\n           tipo_calefaccion == \"hot air\" ~ \"Aire acondicionado\",\n           tipo_calefaccion == \"hot water/steam\" ~ \"Calefón\",\n           tipo_calefaccion == \"electric\" ~ \"Ducha Eléctrica\",\n           TRUE ~ NA_character_),\n           consumo_calefaccion = case_when(\n           consumo_calefaccion ==\"gas\" ~\"Gas\",\n           consumo_calefaccion == \"electric\" ~ \"Eléctrico\",\n           consumo_calefaccion == \"oil\" ~ \"Diesel\",\n               TRUE ~ NA_character_),\n           desague = case_when(\n               desague == \"septic\" ~ \"Pozo séptico\",\n               desague == \"public/commercial\" ~ \"Tubería\",\n               desague == \"none\" ~ \"Ninguno\",\n               TRUE ~ NA_character_),\n           banios = case_when(\n             banios %in% c(0, 1.5) ~ 1,\n             banios %in% c(2.5) ~ 2,\n             banios %in% c(3.5, 4, 4.5) ~ 3,\n             TRUE ~ banios),\n           chimenea = case_when(\n             chimenea == 0 ~ \"No\",\n             chimenea %in% c(1:4) ~ \"Sí\",\n             TRUE ~ as.character(chimenea)),\n           across(c(parques_canchas_deportivas, \n                    construccion_nueva,\n                    linea_telefonica), \n                  ~ ifelse(. == \"Yes\", \n                           \"Sí\",\n                           \"No\")),\n           metros_habitables = metros_habitables/10) %&gt;% \n  select(-metros_totales,\n         -habitaciones)\n\n\n\n\nnum_vars &lt;- datos %&gt;% select_if(is.numeric)\nnum_cols &lt;- ncol(num_vars)\ncol_names &lt;- colnames(num_vars)\ncat(\"Las dimensiones del df son:\")\n\nLas dimensiones del df son:\n\ndim(datos)\n\n[1] 1728   14\n\ncat(\"Las variables cuantitativas son:\", num_cols, \"\\n\") \n\nLas variables cuantitativas son: 7 \n\ncat(\"Los nombres de las variables cuantitativas son:\\n\")\n\nLos nombres de las variables cuantitativas son:\n\nfor (i in seq_along(col_names)) {\n  cat(i, \":\", col_names[i], \"\\n\")\n}\n\n1 : precio_alquiler \n2 : antiguedad \n3 : precio_terreno \n4 : metros_habitables \n5 : universitarios \n6 : dormitorios \n7 : banios \n\n\n\n\n\n\nDT::datatable(datos, options = list(scrollX = TRUE, pageLength = 5))\n\n\n\n\n\n\n\n\n\n\n\n\n\ncat(\"El determinante de la matriz de la var numéricas es: \", det(cor(num_vars)))\n\nEl determinante de la matriz de la var numéricas es:  0.08362589\n\n\n\n\n\n\nmyboxplotData &lt;- data_to_boxplot(datos\n                                 \n                                 ,precio_alquiler\n                                 ,tipo_calefaccion\n                                 ,group_var     = tipo_calefaccion\n                                 ,add_outliers  = FALSE)\n\n# Se puede incluir desde una paleta de colores en R:\n\ncols &lt;- brewer.pal(3, \"Set2\");cols\n\n[1] \"#66C2A5\" \"#FC8D62\" \"#8DA0CB\"\n\nhighchart()%&gt;%\n  hc_xAxis(type =\"category\") %&gt;%\n  hc_add_series_list(myboxplotData) %&gt;%\n  hc_xAxis(title = list(text = \"Tipo de Calefacción\")) %&gt;%\n  hc_yAxis(title = list(text = \"Precio del Alquiler\")) %&gt;%\n  hc_title(text= \"Boxplot\") %&gt;% \n  hc_subtitle(text= \"Precio del Alquiler\") %&gt;% \n  hc_caption(text= \"Fuente: Encuesta a Sartoga 2006 - Condado de New York\")%&gt;% \n  # hc_add_theme(hc_theme_smpl()) %&gt;%\n  hc_legend(enabled= FALSE) %&gt;% \n  hc_colors(cols)\n\n\n\n\n\n\n\n\n\n\n# Selección de las variables numéricas:\n\ntbl_numericas &lt;- datos %&gt;% select_if(is.numeric)\n\npairs.panels(tbl_numericas,\n             gap=0,\n             pch=21)\n\n\n\n\n\n\n\n\nplot_correlation(\n  data = datos,\n  type = \"continuous\",\n  title = \"Matriz de correlación variables continuas\",\n  theme_config = list(legend.position = \"none\",\n                      plot.title = element_text(size = 16, face = \"bold\"),\n                      axis.title = element_blank(),\n                      axis.text.x = element_text(angle = -45, hjust = +0.1)))\n\n\n\n\n\n\n\n\nset.seed(123)\nsplit_inicial &lt;- initial_split(\n  data   = datos,\n  prop   = 0.8,\n  strata = precio_alquiler\n)\ndatos_train &lt;- training(split_inicial) %&gt;% select(precio_alquiler, antiguedad, precio_terreno, metros_habitables, universitarios, dormitorios, banios, everything())\ndatos_test  &lt;- testing(split_inicial)\nnames(datos_train)\n\n [1] \"precio_alquiler\"            \"antiguedad\"                \n [3] \"precio_terreno\"             \"metros_habitables\"         \n [5] \"universitarios\"             \"dormitorios\"               \n [7] \"banios\"                     \"chimenea\"                  \n [9] \"tipo_calefaccion\"           \"consumo_calefaccion\"       \n[11] \"desague\"                    \"parques_canchas_deportivas\"\n[13] \"construccion_nueva\"         \"linea_telefonica\"          \n\n\n\n\n\n\npc &lt;- prcomp(datos_train[,1:7],\n             center = TRUE,\n            scale. = TRUE)\nattributes(pc)\n\n$names\n[1] \"sdev\"     \"rotation\" \"center\"   \"scale\"    \"x\"       \n\n$class\n[1] \"prcomp\"\n\n\n\ng &lt;- ggbiplot(pc,\n              obs.scale = 1,\n              var.scale = 1,\n              groups = datos_train$tipo_calefaccion,\n              ellipse = TRUE,\n              circle = TRUE,\n              ellipse.prob = 0.68)\ng &lt;- g + scale_color_discrete(name = '')\ng &lt;- g + theme(legend.direction = 'horizontal',\n               legend.position = 'top')\nprint(g)"
  },
  {
    "objectID": "IntroduccionMetodosMultivariantes.html#importación-de-las-librerías-y-tratamiento-a-los-datos",
    "href": "IntroduccionMetodosMultivariantes.html#importación-de-las-librerías-y-tratamiento-a-los-datos",
    "title": "Análisis Factorial - BiPlot",
    "section": "",
    "text": "# Carga de las bibliotecas:\nlibrary(tidymodels)\nlibrary(highcharter)\nlibrary(tidyverse)\nlibrary(skimr)\nlibrary(DataExplorer)\nlibrary(ggpubr)\nlibrary(univariateML)\nlibrary(GGally)\nlibrary(doParallel)\nlibrary(jsonlite)\nlibrary(openxlsx)\nlibrary(ggplot2)\nlibrary(RPostgreSQL)\nlibrary(e1071)\nlibrary(RColorBrewer)\nlibrary(DT)\nlibrary(psych)\nlibrary(devtools)\nlibrary(ggbiplot)\nsource(\"funciones.R\")\n\ndata(\"SaratogaHouses\", package = \"mosaicData\")\n\ndatos &lt;- SaratogaHouses\n\n# Se renombran las columnas para que sean más descriptivas\ncolnames(datos) &lt;- c(\"precio_alquiler\",\n                     \"metros_totales\", \n                     \"antiguedad\",\n                     \"precio_terreno\",\n                     \"metros_habitables\",\n                     \"universitarios\",\n                     \"dormitorios\",\n                     \"chimenea\",\n                     \"banios\",\n                     \"habitaciones\",\n                     \"tipo_calefaccion\", \n                     \"consumo_calefaccion\",\n                     \"desague\",\n                     \"parques_canchas_deportivas\",\n                     \"construccion_nueva\", \n                     \"linea_telefonica\")\n\n# Recodificación de valores al español:\n\ndatos &lt;- datos %&gt;% \n    mutate(tipo_calefaccion = case_when(\n           tipo_calefaccion == \"hot air\" ~ \"Aire acondicionado\",\n           tipo_calefaccion == \"hot water/steam\" ~ \"Calefón\",\n           tipo_calefaccion == \"electric\" ~ \"Ducha Eléctrica\",\n           TRUE ~ NA_character_),\n           consumo_calefaccion = case_when(\n           consumo_calefaccion ==\"gas\" ~\"Gas\",\n           consumo_calefaccion == \"electric\" ~ \"Eléctrico\",\n           consumo_calefaccion == \"oil\" ~ \"Diesel\",\n               TRUE ~ NA_character_),\n           desague = case_when(\n               desague == \"septic\" ~ \"Pozo séptico\",\n               desague == \"public/commercial\" ~ \"Tubería\",\n               desague == \"none\" ~ \"Ninguno\",\n               TRUE ~ NA_character_),\n           banios = case_when(\n             banios %in% c(0, 1.5) ~ 1,\n             banios %in% c(2.5) ~ 2,\n             banios %in% c(3.5, 4, 4.5) ~ 3,\n             TRUE ~ banios),\n           chimenea = case_when(\n             chimenea == 0 ~ \"No\",\n             chimenea %in% c(1:4) ~ \"Sí\",\n             TRUE ~ as.character(chimenea)),\n           across(c(parques_canchas_deportivas, \n                    construccion_nueva,\n                    linea_telefonica), \n                  ~ ifelse(. == \"Yes\", \n                           \"Sí\",\n                           \"No\")),\n           metros_habitables = metros_habitables/10) %&gt;% \n  select(-metros_totales,\n         -habitaciones)\n\n\n\n\nnum_vars &lt;- datos %&gt;% select_if(is.numeric)\nnum_cols &lt;- ncol(num_vars)\ncol_names &lt;- colnames(num_vars)\ncat(\"Las dimensiones del df son:\")\n\nLas dimensiones del df son:\n\ndim(datos)\n\n[1] 1728   14\n\ncat(\"Las variables cuantitativas son:\", num_cols, \"\\n\") \n\nLas variables cuantitativas son: 7 \n\ncat(\"Los nombres de las variables cuantitativas son:\\n\")\n\nLos nombres de las variables cuantitativas son:\n\nfor (i in seq_along(col_names)) {\n  cat(i, \":\", col_names[i], \"\\n\")\n}\n\n1 : precio_alquiler \n2 : antiguedad \n3 : precio_terreno \n4 : metros_habitables \n5 : universitarios \n6 : dormitorios \n7 : banios \n\n\n\n\n\n\nDT::datatable(datos, options = list(scrollX = TRUE, pageLength = 5))"
  },
  {
    "objectID": "IntroduccionMetodosMultivariantes.html#análisis-exploratorio",
    "href": "IntroduccionMetodosMultivariantes.html#análisis-exploratorio",
    "title": "Análisis Factorial - BiPlot",
    "section": "",
    "text": "cat(\"El determinante de la matriz de la var numéricas es: \", det(cor(num_vars)))\n\nEl determinante de la matriz de la var numéricas es:  0.08362589\n\n\n\n\n\n\nmyboxplotData &lt;- data_to_boxplot(datos\n                                 \n                                 ,precio_alquiler\n                                 ,tipo_calefaccion\n                                 ,group_var     = tipo_calefaccion\n                                 ,add_outliers  = FALSE)\n\n# Se puede incluir desde una paleta de colores en R:\n\ncols &lt;- brewer.pal(3, \"Set2\");cols\n\n[1] \"#66C2A5\" \"#FC8D62\" \"#8DA0CB\"\n\nhighchart()%&gt;%\n  hc_xAxis(type =\"category\") %&gt;%\n  hc_add_series_list(myboxplotData) %&gt;%\n  hc_xAxis(title = list(text = \"Tipo de Calefacción\")) %&gt;%\n  hc_yAxis(title = list(text = \"Precio del Alquiler\")) %&gt;%\n  hc_title(text= \"Boxplot\") %&gt;% \n  hc_subtitle(text= \"Precio del Alquiler\") %&gt;% \n  hc_caption(text= \"Fuente: Encuesta a Sartoga 2006 - Condado de New York\")%&gt;% \n  # hc_add_theme(hc_theme_smpl()) %&gt;%\n  hc_legend(enabled= FALSE) %&gt;% \n  hc_colors(cols)\n\n\n\n\n\n\n\n\n\n\n# Selección de las variables numéricas:\n\ntbl_numericas &lt;- datos %&gt;% select_if(is.numeric)\n\npairs.panels(tbl_numericas,\n             gap=0,\n             pch=21)\n\n\n\n\n\n\n\n\nplot_correlation(\n  data = datos,\n  type = \"continuous\",\n  title = \"Matriz de correlación variables continuas\",\n  theme_config = list(legend.position = \"none\",\n                      plot.title = element_text(size = 16, face = \"bold\"),\n                      axis.title = element_blank(),\n                      axis.text.x = element_text(angle = -45, hjust = +0.1)))\n\n\n\n\n\n\n\n\nset.seed(123)\nsplit_inicial &lt;- initial_split(\n  data   = datos,\n  prop   = 0.8,\n  strata = precio_alquiler\n)\ndatos_train &lt;- training(split_inicial) %&gt;% select(precio_alquiler, antiguedad, precio_terreno, metros_habitables, universitarios, dormitorios, banios, everything())\ndatos_test  &lt;- testing(split_inicial)\nnames(datos_train)\n\n [1] \"precio_alquiler\"            \"antiguedad\"                \n [3] \"precio_terreno\"             \"metros_habitables\"         \n [5] \"universitarios\"             \"dormitorios\"               \n [7] \"banios\"                     \"chimenea\"                  \n [9] \"tipo_calefaccion\"           \"consumo_calefaccion\"       \n[11] \"desague\"                    \"parques_canchas_deportivas\"\n[13] \"construccion_nueva\"         \"linea_telefonica\"          \n\n\n\n\n\n\npc &lt;- prcomp(datos_train[,1:7],\n             center = TRUE,\n            scale. = TRUE)\nattributes(pc)\n\n$names\n[1] \"sdev\"     \"rotation\" \"center\"   \"scale\"    \"x\"       \n\n$class\n[1] \"prcomp\"\n\n\n\ng &lt;- ggbiplot(pc,\n              obs.scale = 1,\n              var.scale = 1,\n              groups = datos_train$tipo_calefaccion,\n              ellipse = TRUE,\n              circle = TRUE,\n              ellipse.prob = 0.68)\ng &lt;- g + scale_color_discrete(name = '')\ng &lt;- g + theme(legend.direction = 'horizontal',\n               legend.position = 'top')\nprint(g)"
  }
]